
import useBaseUrl from '@docusaurus/useBaseUrl';


作业项是现场作业的最基本元素，它反映了一个单一数据类型的变量，可以是现场作业需要回答的问题或者是需要录入的数据。作业项允许配置作业项逻辑，作为现场作业的知识库，为现场作业人员提供标准化和常规的作业指导。

## 新建作业项

* 在 im **解决方案开发中心**->**作业管理器**内，选中作业组，右键选择**新建作业项**，创建一个作业。

  * 作业下新建作业项

    <img alt=" " src={useBaseUrl('docimg/作业组新建作业项.jpg')} />

* 同时，属性栏出现该作业项的属性对话框。

  <img alt=" " src={useBaseUrl('docimg/作业项通用属性.jpg')} />

## 配置作业项通用属性

配置作业通用属性，如图：

<img alt=" " src={useBaseUrl('docimg/作业项通用属性框.jpg')} />

* **作业项名** - 作业项名称，用户以此来识别该作业项。作业项名称在同一个层次是唯一的。

* **作业项描述** - 对该作业项的描述信息。

* **数据类型** - 目前作业项支持9种数据类型：

    <img alt=" " src={useBaseUrl('docimg/作业项数值类型.jpg')} />

  * **字符串**：字符串类型数据
  * **数值**：任何数值类型的数据，可以使用“**数据格式化选择**”配置所需的数值格式。数值类型的数据允许选择预定义好的工程单位
  * **列表**：预先定义的响应列表数据。
  * **可输入列表**：允许用户在手持终端上录入响应列表以外的数据。
  * **签名**：允许用户在手持终端上输入、保存手写签名。
  * **日期时间**：以日期时间为输入数值。
  * **文件**：文件格式数据类型。
  * **多选列表**：预先定义的响应列表数据，一次可以选择多个值
  * **Json字符串**：Json字符串数据格式，可定义Json数据格式

* **可选项脚本**： 选择“**字符串**”数据类型时，可以通过编写脚本的方式提供字符串输入值的选项

* **关联资产属性** - 可选择一个对应的资产属性（关联资产所属资产类别内配置）。

* **以属性值为默认值** - 以关联的资产属性值为该作业项的默认值

* **更新资产属性值** - 以作业项值更新关联的资产属性值

* **默认值** - 该值将在用户使用手持终端执行该作业项时出现在值输入框中。可根据需要选择是否使用默认值，不适用则不添加。

* **默认值表达式** - 通过编辑JavaScript脚本表达式的方式计算出默认值，该值将在用户使用手持终端执行该作业时出现在值输入框中。可根据需要选择是否使用默认值表达式，不适用则不添加。

* **重复计算默认值** - 用户使用手持终端执行过一次该作业后，当有相关值发生修改，如果需要重新计算该值时，则可根据需要选择是否使用重复计算默认值，不适用则不勾选。

* **数据输入方式** - 可选择通过其它设备输入数值

    <img alt=" " src={useBaseUrl('docimg/数据输入方式.jpg')} />

  * **条码**： 手持终端扫描条码 ID 输入
  * **RFID** ： 启用 RFID 射频识别电子标签 ID 输入
  * **VIBTool**：通过 VIBTool 测量仪器测量相关数值并输入
  * **OptrisMS**：通过 OptrisMS 红外测温仪测量相关数值并输入
  * **AIC8600**：通过 AIC8600 测量仪器测量相关数值并输入

* **字段名** - 根据数据输入方式选择具体数值类型

* **允许手动输入** - 是否允许在手持终端手动输入作业项值

* **终端显示样式** - 选择以单选框、按钮、数字滑动块等方式输入作业项值
* 单选框
  <img alt=" " src={useBaseUrl('docimg/终端显示样式单选框.jpg')} />
* 点击单选框
  <img alt=" " src={useBaseUrl('docimg/终端显示样式点击单选框.png')} />
* 按钮
  <img alt=" " src={useBaseUrl('docimg/终端显示样式按钮.jpg')} />
* 开关
  <img alt=" " src={useBaseUrl('docimg/终端显示样式开关.png')} />
  如果数据类型是列表，终端显示样式是开关，只显示列表前2个列表项，开关建议使用2个选项的场景
* 数字滑动块
  <img alt=" " src={useBaseUrl('docimg/终端显示样式数字滑动块.png')} />
* 数字加减块
  <img alt=" " src={useBaseUrl('docimg/终端显示样式数字加减块.png')} />
* 字符串单选树
  <img alt=" " src={useBaseUrl('docimg/终端显示样式字符串单选树.png')} />
  单选树建议使用在资产，组织单元等树状的结构的情况
* 字符串多选树
  <img alt=" " src={useBaseUrl('docimg/终端显示样式字符串多选树.png')} />
  单选树建议使用在资产，组织单元等树状的结构的情况
* 复选框
  <img alt=" " src={useBaseUrl('docimg/终端显示样式复选框.png')} />


 

* **动态显示项** - 数据类型为**数值**时，编辑在手持终端显示的动态项数据

    <img alt=" " src={useBaseUrl('docimg/动态显示项.jpg')} />
    <img alt=" " src={useBaseUrl('docimg/动态显示项效果.png')} />

* **工程单位**： 选择“**数值**”数据类型使用的单位

* **数据格式化选择** - 针对数值类型，你可以指明以下五种数据格式：
  * **{0:D}** 整数
  * **{0:E}** 科学计数法
  * **{0:N}** 两位小数的实数
  * **{0:N3}** 三位小数的实数
  * **{0:N4}** 四位小数的实数

* **引用名** - 作业项的一个别名，在其他作业或作业项逻辑配置中引用该作业项值时，或作为跳转逻辑行为的目标时，使用该引用名。

* **允许查看历史** - 若选择，手持终端将能够查看该作业项的历史数据。

* **相关业务范畴** - 选择该作业项所属业务范畴，可多选。

## 配置作业项业务规则

配置作业项业务规则，如图：

<img alt=" " src={useBaseUrl('docimg/作业项业务规则.jpg')} />

* **可用附件** - 可选择文档、图片等附件以在手持终端上执行该作业时查看，指导作业操作。

* **必须完成** - 用户必须完成该作业项才能结束作业组，这是打开该作业组后必须完成的作业项。

* **使用上一次的值** - 为方便手持终端用户操作，用户可以选择该项这样本作业项上一次的值将作为缺省值输入到手持终端。

* **在终端上隐藏** - 该作业项在手持终端作业执行页面不可见，在终端导航页面可见。

* **最大值** - 该作业项是否启用最大值检查。如果启用，将允许用户指定最大值，并将允许他/她配置当录入值超过最大值时视为警告还是错误。如果是警告，允许手持终端录入该数据，即使它超过了最大值；如果是错误，将不允许其录入超过最大值的数值。

* **最小值** - 该作业项是否启用最小值检查。如果启用，将允许用户指定最小值，并将允许他/她配置当录入值小于最小值时视为警告还是错误。如果是警告，允许手持终端录入该数据，即使它小于最小值；如果是错误，将不允许其录入小于最小值的数值。

* **不允许为空** - 该作业项是否不允许值为空。如果不允许，用户可以指定值为空时视为警告还是错误。如果是警告，空值是允许录入的，只是不是有效数值，系统也将认为该作业项并未完成；如果是错误，手持终端上出现空值将无法继续。系统缺省设置为不允许为空， 为空视为警告。这一缺省设置适用于绝大多数的用户场景。

* **空值将视为** - 设置作业项出现空值的报警，仅未勾选“不允许为空”时配置。

* **阈值** - 设置一个触发逻辑的最小临界值，作业项值变化幅度低于阈值，系统将视为没有变化。

## 配置作业项逻辑

* 在**im 解决方案开发中心**->**作业管理器**内，选中作业项，右键**配置逻辑**。主工作区出现以所选作业名命名的逻辑编辑器选项卡，如图：

  <img alt=" " src={useBaseUrl('docimg/打开配置作业组作业项逻辑.jpg')} />

  <img alt=" " src={useBaseUrl('docimg/作业项配置逻辑工作区.jpg')} />

* 作业项逻辑是现场作业指导的知识库，它定义了当现场出现何种情况时，需要怎样的处理。其定义与作业逻辑的定义非常类似，主要区别在于作业项逻辑支持的行为不再是作业状态的变迁，而是手持终端上的行为。具体的作业项逻辑行为包括：

  * **空** - 不发生任何行为，通常用来将此逻辑关联一个例外等级，作为一个例外在 im 企业运营中心展现。
  * **文字记录** - 当该逻辑发生时，允许用户在手持终端上添加文字记录，说明情况。
  * **信息提示** - 用户在该逻辑的属性窗口配置相关的信息提示内容。当该逻辑发生时，手持终端将会以通知的方式提示该信息。用于常规的现场作业例外处理提示。
  * **跳转** - 允许用户指定该逻辑发生时，应该跳转到某个作业或作业项去执行。跳转目标以引用名在属性窗口中配置。
  * **拍照记录** - 当该逻辑发生时，允许用户在手持终端上进行现场拍照，记录情况。一次可以拍多张照片。
  * **创建作业** - 触发逻辑可以在手持终端创建一个作业组或在本作业组内创建一个引用作业规范执行。
  * **执行脚本** - 触发逻辑可以在手持终端执行一段脚本

* 数值标签的**条件类型**

  <img alt=" " src={useBaseUrl('docimg/作业项数值标签条件类型.jpg')} />

  * **=** 等于
  * **< >** 不等于
  * **>=** 大于等于
  * **<=** 小于等于
  * **>** 大于
  * **<** 小于
  * **↗>** 持续上升次数大于，该作业项连续作业的多次数值持续上升的次数是否大于某值
  * **↗<** 持续上升次数小于，该作业项连续作业的多次数值持续上升的次数是否小于某值
  * **↘>** 持续下降次数大于，该作业项连续作业的多次数值持续下降的次数是否大于某值
  * **↘<** 持续下降次数小于，该作业项连续作业的多次数值持续下降的次数是否小于某值
  * **↗↘>** 连续变化次数大于，该作业项连续作业的多次数值连续变化的次数是否大于某值
  * **↗↘<** 连续变化次数小于，该作业项连续作业的多次数值连续变化的次数是否小于某值
  * **→>** 连续不变次数大于，该作业项连续作业的多次数值连续不变的次数是否大于某值
  * **→<** 连续不变次数小于，该作业项连续作业的多次数值连续不变的次数是否小于某值
 
